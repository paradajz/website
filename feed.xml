<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US"><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="https://shanteacontrols.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://shanteacontrols.com/" rel="alternate" type="text/html" hreflang="en-US" /><updated>2023-01-04T16:20:47+00:00</updated><id>https://shanteacontrols.com/feed.xml</id><title type="html">Shantea Controls</title><entry><title type="html">OpenDeck boards v3 now available</title><link href="https://shanteacontrols.com/2022/06/20/opendeck-boards-v3-available-now/" rel="alternate" type="text/html" title="OpenDeck boards v3 now available" /><published>2022-06-20T00:00:00+00:00</published><updated>2022-06-20T00:00:00+00:00</updated><id>https://shanteacontrols.com/2022/06/20/opendeck-boards-v3-available-now</id><content type="html" xml:base="https://shanteacontrols.com/2022/06/20/opendeck-boards-v3-available-now/"><![CDATA[<p>The wait is over - new boards are available now on <a href="https://www.tindie.com/products/paradajz/opendeck-diy-midi-platform-l/">Tindie</a>!</p>

<p>To recap, here are the features:</p>

<ul>
  <li>128 digital inputs</li>
  <li>64 digital outputs</li>
  <li>64 analog inputs</li>
  <li>DIN MIDI</li>
  <li>USB MIDI</li>
  <li>DMX</li>
  <li>Bluetooth on Arduino variant</li>
</ul>

<p>Price for Black Pill variant is $165, and $175 for Arduino variant. The only difference is Bluetooth support on Arduino variant, and few more presets (since nRF52840 used on Arduino has more flash memory). The boards are being sold without headers, and DIN MIDI connectors are optionally available.</p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[The wait is over - new boards are available now on Tindie!]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/od3/5.png" /><media:content medium="image" url="https://shanteacontrols.com/od3/5.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">OpenDeck v7</title><link href="https://shanteacontrols.com/2022/04/09/opendeck-7/" rel="alternate" type="text/html" title="OpenDeck v7" /><published>2022-04-09T00:00:00+00:00</published><updated>2022-04-09T00:00:00+00:00</updated><id>https://shanteacontrols.com/2022/04/09/opendeck-7</id><content type="html" xml:base="https://shanteacontrols.com/2022/04/09/opendeck-7/"><![CDATA[<p>Even though last post made it sound like the development of the OpenDeck platform is stopping, that was not the case. In the meantime I’ve found few more areas I’d like to explore. One of them is Bluetooth MIDI and that was the focus of latest OpenDeck release, <a href="https://github.com/shanteacontrols/OpenDeck/releases/tag/v7.1.0">v7.1.0</a>.</p>

<p>BLE MIDI is now supported on the following boards:</p>

<ul>
  <li><a href="https://www.adafruit.com/product/4481">Adafruit ItsyBitsy nRF52840 Express</a></li>
  <li><a href="https://www.nordicsemi.com/Products/Development-hardware/nrf52840-dk">nRF52840 DK</a></li>
</ul>

<p>As always, support for more BLE supported boards will be added in the future. Building a wireless controller with OpenDeck is now as simple as toggling the “BLE MIDI” toggle in the web configuration tool.</p>

<p><img src="/images/blog/v7_midi_options.jpg" alt="" /></p>

<p>There’s also reworked thruing, so you can thru anything to anything now. Some other new features since v6.0 include:</p>

<ul>
  <li>Added the ability to specify global MIDI channel for all components</li>
  <li>Added the ability to specify “omni” MIDI chanel 17
    <ul>
      <li>For outgoing data, channel 17 will send MIDI messages on all MIDI channels</li>
      <li>For incoming data, setting the channel to 17 will ignore the channel (eg. for LEDs this will make them listen to all MIDI channels)</li>
    </ul>
  </li>
  <li>Added “Only note off” and “Only CC 0” message modes for buttons: combined with omni MIDI channel setting this makes it possible to configure the buttons as “kill” switches to mute all channels if supported by the controlling software / gear</li>
  <li>Reworked MIDI thru options</li>
  <li>Implemented double-buffering for DMX to avoid tearing</li>
  <li>Added the ability to control DMX channels via SysEx</li>
  <li>Added the ability to control DMX channels via connected components - DMX message mode can now be assigned to buttons, encoders and analog components</li>
  <li>Added the ability to specify lower and upper ADC percentage offsets (useful for inputs which can’t reach minimum or maximum ADC value)</li>
</ul>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[Even though last post made it sound like the development of the OpenDeck platform is stopping, that was not the case. In the meantime I’ve found few more areas I’d like to explore. One of them is Bluetooth MIDI and that was the focus of latest OpenDeck release, v7.1.0.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/ble.png" /><media:content medium="image" url="https://shanteacontrols.com/ble.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">OpenDeck boards v3 in development</title><link href="https://shanteacontrols.com/2022/04/09/opendeck-boards-v3-in-development/" rel="alternate" type="text/html" title="OpenDeck boards v3 in development" /><published>2022-04-09T00:00:00+00:00</published><updated>2022-04-09T00:00:00+00:00</updated><id>https://shanteacontrols.com/2022/04/09/opendeck-boards-v3-in-development</id><content type="html" xml:base="https://shanteacontrols.com/2022/04/09/opendeck-boards-v3-in-development/"><![CDATA[<p>The new OpenDeck boards are coming. Not yet, but soon enough!</p>

<p>It’s been 4 months now since the OpenDeck boards have been sold out. <a href="https://shanteacontrols.com/2021/11/23/opendeck-6-what-comes-next/">Few posts ago</a> I wrote on why the future of the boards looks bleak. In short: high prices and general electronics shortage make it very hard to design anything involving MCU right now.</p>

<p>I’ve found a workaround and started to design the new OpenDeck board. It’s quite different from my previous boards. It’s gonna be big! These are the main features:</p>

<ul>
  <li>128 digital inputs</li>
  <li>64 digital outputs</li>
  <li>64 analog inputs</li>
  <li>DIN MIDI</li>
  <li>USB MIDI</li>
  <li>DMX</li>
  <li>Bluetooth*</li>
  <li>Accelerometer / gyroscope / magnetometer*</li>
</ul>

<p>Why it’s so big? Well, since OpenDeck firmware supports many other boards, some with the amount of I/O similar to the original board, this design feels like a more compelling proposition, compared to the boards you can buy off the shelf. Many people have been asking for more I/O, so here we are.</p>

<p>Due to the chip shortage, the idea is revised a bit - this board will accept either <a href="https://store.arduino.cc/products/arduino-nano-33-ble">Arduino Nano 33 BLE</a> (OpenDeck variant A) or <a href="https://www.aliexpress.com/item/1005001456186625.html">STM32F4 Black Pill</a> boards (OpenDeck variant B). The main difference is Bluetooth and acc/gyro/mag sensors are available only on Arduino board, otherwise for end users it’s the same thing. This has many advantages compared to my previous design which was fully my own:</p>

<ul>
  <li>I don’t have to lock the design to a specific MCU</li>
  <li>Shortage affects me much less this way (if at all)</li>
  <li>This makes the board compatible with 5 (!) boards: there’s two variants of Arduino 33 BLE board and 3 variants of Black Pill boards. Even if one becomes unavailable, there are many others to choose from.</li>
  <li>These boards are actually available to buy unlike standalone MCUs</li>
</ul>

<p>Price <em>should</em> be somewhat similar to the previous board, and availability - who knows? Hopefully in 2-3 months. This is also my first design in KiCAD after 10 years of using EAGLE, so just learning the software alone should take a while.</p>

<p>Some renders of the board below (Arduino should obviously be blue, not sure why it’s brown in render).</p>

<p><img src="/images/blog/od3/1.png" alt="" /></p>

<p><img src="/images/blog/od3/2.png" alt="" />
<img src="/images/blog/od3/3.png" alt="" />
<img src="/images/blog/od3/4.png" alt="" /></p>

<p>This board also addresses some of the shortcomings of the previous board - there’s more space between pin headers now, connectors for +5V and +3V have been added and there are also real connectors now for I2C and touchscreen.</p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[The new OpenDeck boards are coming. Not yet, but soon enough!]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/od3/2.png" /><media:content medium="image" url="https://shanteacontrols.com/od3/2.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">OpenDeck v6 - what comes next?</title><link href="https://shanteacontrols.com/2021/11/23/opendeck-6-what-comes-next/" rel="alternate" type="text/html" title="OpenDeck v6 - what comes next?" /><published>2021-11-23T00:00:00+00:00</published><updated>2021-11-23T00:00:00+00:00</updated><id>https://shanteacontrols.com/2021/11/23/opendeck-6-what-comes-next</id><content type="html" xml:base="https://shanteacontrols.com/2021/11/23/opendeck-6-what-comes-next/"><![CDATA[<p>OpenDeck v6 was released a while ago, it’s just that I haven’t written a blog post about it. Let’s correct that.</p>

<h2 id="dmx">DMX</h2>

<p>OpenDeck now supports DMX output through <a href="https://www.openlighting.org/ola/">OLA (Open Lighting Architecture)</a>. OLA implements interface which various lighting software can use (such as <a href="https://qlcplus.org/">QLC+</a>). This is done via additional USB interface which enumerates once the OpenDeck boards are plugged in - serial port. DMX support involves adding some circuitry to the board. This information is available <a href="https://github.com/shanteacontrols/OpenDeck/wiki/Connections#dmx">on the wiki</a>. Once the circuitry is added, the only thing left is to click “Enable DMX” in OpenDeck configurator. Simple as that.</p>

<h2 id="support-for-more-boards">Support for more boards</h2>

<p>OpenDeck now supports more boards than ever. These are the newly added boards on which OpenDeck firmware can be loaded:</p>

<ul>
  <li><a href="https://www.waveshare.com/core405r.htm">Waveshare Core405R</a></li>
  <li><a href="https://www.waveshare.com/core407v.htm">Waveshare Core407V</a></li>
  <li><a href="https://www.waveshare.com/core407i.htm">Waveshare Core407I</a></li>
  <li><a href="https://stm32-base.org/boards/STM32F407VET6-STM32-F4VE-V2.0">STM32F4VE</a> (<a href="https://www.ebay.com/itm/401956886691?hash=item5d967f58a3:g:fFcAAOSw4fhdy2rk">eBay</a>)</li>
  <li><a href="http://www.chinalctech.com/m/view.php?aid=338">TPyBoard (PyBoard clone)</a> (<a href="https://www.ebay.com/itm/183887614794?hash=item2ad08e534a:g:bmsAAOSwrSpdLtFM">eBay</a>)</li>
</ul>

<p>Flashing instructions have been updated for all these boards and also greatly improved for other boards (such as Arduino Mega). Check the docs <a href="https://github.com/shanteacontrols/OpenDeck/wiki/Flashing-the-OpenDeck-firmware">on the wiki</a>.</p>

<h2 id="other-stuff">Other stuff</h2>

<ul>
  <li>Analog components can now be used to control LED state in local mode. I’ve been asked about this for a while, and now it’s possible due to the major redesign of some components.</li>
  <li>Program change and preset change LED control modes are now separated. Preset change using MIDI in message has been removed to avoid confusion.</li>
  <li>Smoother analog readouts due to the improved analog filtering</li>
  <li>All kinds of minor fixes and improvements</li>
</ul>

<h1 id="what-next">What next?</h1>

<p>I only have about 10 more OpenDeck boards to sell via Tindie and then I’m out of stock. Due to the various factors, I probably won’t be ordering new batches of boards, which is why there was a great focus on adding support for more boards in the past few months. On top of this, OpenDeck source code is now in a state where I can basically call it finished - as much as I hate to say that since I’ve been doing this for the past 6 years. I just don’t know what else to add to it! It runs on various boards, custom boards can be created by users, it supports all the stuff you’d expect and then some, it has great configurator, I’ve done my best to document the project properly etc. I’m sure I (or someone else) will find some bugs from time to time, which will be fixed, of course. As for the future features - you tell me!</p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[OpenDeck v6 was released a while ago, it’s just that I haven’t written a blog post about it. Let’s correct that.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/cover_opendeck_v6.jpg" /><media:content medium="image" url="https://shanteacontrols.com/cover_opendeck_v6.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">The new DubFocus controller</title><link href="https://shanteacontrols.com/2021/06/04/the-new-dubfocus-controller/" rel="alternate" type="text/html" title="The new DubFocus controller" /><published>2021-06-04T00:00:00+00:00</published><updated>2021-06-04T00:00:00+00:00</updated><id>https://shanteacontrols.com/2021/06/04/the-new-dubfocus-controller</id><content type="html" xml:base="https://shanteacontrols.com/2021/06/04/the-new-dubfocus-controller/"><![CDATA[<p>After some deliberation, I’ve decided to build few new DubFocus controllers. There are several differences between these and previous models:</p>

<ol>
  <li>DubFocus 12 became DubFocus 16 in same case – the horizontal spacing between components is now 29mm instead of 40mm.</li>
  <li>PCBs have been totally redesigned so now, the entire controller is made from 3 large PCBs, connected by two flat cables. There is also one small USB board as before.</li>
  <li>I am now using STM32F411 Black Pill board as the “brain” of the controller since hand soldering of STM32 MCUs is a major pain.</li>
  <li>No more holders and holding plate – everything is screwed to Plexiglas plate and then Gravoply plate is screwed on top of that. Before, Plexiglas and Gravoply plates have been glued together. Plexiglas plate is now also thicker since it caries all the electronics on itself (5mm vs. 3mm before).</li>
  <li>I’ve used metal pots for these builds. No particular reason – I still can’t decide which ones I prefer.</li>
</ol>

<p>So, without further ado, check the pictures below to see how DubFocus 16C (C = compact) came into life!</p>

<p><img src="/images/blog/172542229_220702589727822_618265503888699395_n.jpg" alt="" /></p>

<p><img src="/images/blog/173199660_221392879658793_9034175403378905046_n.jpg" alt="" /></p>

<p><img src="/images/blog/174163217_223865929411488_3903818462814472629_n.jpg" alt="" /></p>

<p><img src="/images/blog/174633403_224150579383023_3984727542828117320_n.jpg" alt="" /></p>

<p><img src="/images/blog/178580180_231869485277799_5282707656067592910_n.jpg" alt="" /></p>

<p><img src="/images/blog/180033747_234501895014558_1655514314867501703_n.jpg" alt="" /></p>

<p><img src="/images/blog/180321888_234501448347936_1144560035242290225_n.jpg" alt="" /></p>

<p><img src="/images/blog/180611525_234501701681244_4111231124521419647_n.jpg" alt="" /></p>

<p><img src="/images/blog/183117105_239682507829830_3719657556997011817_n.jpg" alt="" /></p>

<p><img src="/images/blog/184056315_242353007562780_9047760974017905916_n.jpg" alt="" /></p>

<p><img src="/images/blog/187945877_251376923327055_3222605484840057158_n.jpg" alt="" /></p>

<p><img src="/images/blog/188305862_251376619993752_775288677915221130_n.jpg" alt="" /></p>

<p><img src="/images/blog/188423488_251376816660399_8975519552491615412_n.jpg" alt="" /></p>

<p><img src="/images/blog/188534875_251377606660320_8726075325443042313_n.jpg" alt="" /></p>

<p><img src="/images/blog/188690883_251378013326946_8034703593923187815_n.jpg" alt="" /></p>

<p><img src="/images/blog/189018428_251377426660338_7769020329510105453_n.jpg" alt="" /></p>

<p><img src="/images/blog/191646335_255734162891331_7987082116862482261_n.jpg" alt="" /></p>

<p><img src="/images/blog/193474182_259492185848862_7612030630368761512_n.jpg" alt="" /></p>

<p><img src="/images/blog/193475565_259492395848841_4401799299658561406_n.jpg" alt="" /></p>

<p><img src="/images/blog/193667083_259708545827226_3189400619628564506_n.jpg" alt="" /></p>

<p><img src="/images/blog/194179722_259919012472846_6560917822354076836_n.jpg" alt="" /></p>

<p><img src="/images/blog/194278674_259918892472858_8013798929619142178_n.jpg" alt="" /></p>

<p><img src="/images/blog/194505585_259491659182248_1741719934655752292_n.jpg" alt="" /></p>

<p><img src="/images/blog/194555994_259491585848922_5660892228912734232_n.jpg" alt="" /></p>

<p><img src="/images/blog/195514057_259708709160543_493190385348544288_n.jpg" alt="" /></p>]]></content><author><name></name></author><category term="dubfocus" /><category term="buildlog" /><summary type="html"><![CDATA[After some deliberation, I’ve decided to build few new DubFocus controllers. There are several differences between these and previous models:]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/193474182_259492185848862_7612030630368761512_n.jpg" /><media:content medium="image" url="https://shanteacontrols.com/193474182_259492185848862_7612030630368761512_n.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Regarding DubFocus</title><link href="https://shanteacontrols.com/2021/03/30/regarding-dubfocus/" rel="alternate" type="text/html" title="Regarding DubFocus" /><published>2021-03-30T00:00:00+00:00</published><updated>2021-03-30T00:00:00+00:00</updated><id>https://shanteacontrols.com/2021/03/30/regarding-dubfocus</id><content type="html" xml:base="https://shanteacontrols.com/2021/03/30/regarding-dubfocus/"><![CDATA[<p>Due to the frequent questions I get about DubFocus, I’ve written this post to clarify some things.</p>

<p>As some of you are already aware, I’ve spent most of 2020 building DubFocus 12 controllers (and one 16ch). This has proved to be very time consuming, mainly due to the way how I designed the electronics and holding system inside the controller. There were also several common points of failure in assembly increasing the already high assembly time even higher. In total, I’ve made 10 of these controllers. During this time, costs were piling up without me even noticing, due to the way I was building these things (basically as soon as I’ve finished one, I started doing another). I’ve gotten into the state of “I just need to order this small thing and one more” for almost a year and then, you put it all on paper and see that you’re losing money. These things happen, but I don’t think anyone sane is willing to lose money on purpose. I certainly am not, so I’ve decided I won’t be building these things anymore.</p>

<p>For several months now, despite this decision, I am constantly being asked for this controller and its price. At some point it starts feeling bad saying “no I don’t build them”. I’ve obviously created something people want, and to be honest I am very proud of that. I’ve even open-sourced entire electronics of this controller and thus enabled the people to build it themselves. I guess most people don’t want to mess with that. Who can blame them? Building an actual product has very little to do with some prototypes on your desk, as people who have actually built a product can attest. Despite being DIY (I am building the controllers in my living room - no workers, no factory), I consider my products professional and I treat them as such. Otherwise, I wouldn’t sell them.</p>

<p>Now, regarding the DubFocus 16: over the past few days I’ve redesigned DubFocus 12 controller into DubFocus 16 - same dimensions, but 16 channels instead. There’s no need to have 40mm of horizontal spacing between components, and when I’ve reduced that I’ve realized 16 channels fit into these dimensions easily. I’ve also redesigned the electronics and the entire assembly so that assembly time is minimal, made a list of every single component I need to buy, calculated all the small extras, taxes, time needed etc. Electronic components cost higher now then they did one year ago and availability is really bad, with waiting times being between several weeks to several months. Chip shortage is very real real in 2021. With all this, DubFocus 16 price turns out to be *drum-roll*:</p>

<p><strong>1200$.</strong></p>

<p>Now, let’s do a comparison…</p>

<ul>
  <li>Vestax VCM 600 is what many producers use for the kind of setup DubFocus is designed. It came out in 2009 and it cost ~900$. Now, when you account for inflation, if it were to come out in 2021 it would cost ~1100$. This thing has 6 channels. For 1200$, DubFocus has 16. End of comparison.</li>
  <li>There’s also the beloved Livid DS1, which you can get second hand for 200-300$. It has 8 channels. So you can buy two of them (if you can find them) and have 16 channels. Granted, this is much cheaper than buying DubFocus. However, the Livid is no more so support is out of the window. This might not matter to you but it certainly does to some.</li>
</ul>

<p>So here I am, comparing myself to *companies*. There’s only me in Shantea Controls. This is also something to consider. I can’t get good deals for parts since I am not buying a truckload of components. This is low volume stuff. If you fail to realize this please don’t contact me.</p>

<p>Now, regarding the actual building of DubFocus, here are the rules:</p>

<ol>
  <li>I can build 4 for them in the coming months</li>
  <li>Payment is done 60% in advance</li>
  <li>Price as already mentioned is 1200$, shipping not included.</li>
  <li>Build time: in about 3-4 months, not before.</li>
</ol>

<p>If I get 4 pre-orders for this, I’ll build them. Otherwise, firmware and electronics are available in <a href="https://github.com/shanteacontrols/OpenDeck">OpenDeck repository on GitHub</a>.</p>]]></content><author><name></name></author><category term="dubfocus" /><category term="announce" /><summary type="html"><![CDATA[Due to the frequent questions I get about DubFocus, I’ve written this post to clarify some things.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/166086360_207954164335998_7262799458133236482_n.jpg" /><media:content medium="image" url="https://shanteacontrols.com/166086360_207954164335998_7262799458133236482_n.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">The touchscreen trio</title><link href="https://shanteacontrols.com/2021/02/18/the-touchscreen-trio/" rel="alternate" type="text/html" title="The touchscreen trio" /><published>2021-02-18T00:00:00+00:00</published><updated>2021-02-18T00:00:00+00:00</updated><id>https://shanteacontrols.com/2021/02/18/the-touchscreen-trio</id><content type="html" xml:base="https://shanteacontrols.com/2021/02/18/the-touchscreen-trio/"><![CDATA[<p>About a year ago I’ve started sketching the new controller for myself, since I’ve found myself a bit limited by the Bergamot controller. Eventually, I made three different controllers (or two, depending on how you count).</p>

<h2 id="cardamom">Cardamom</h2>

<p>Cardamom project started out with specs: 16 pots (standard by now), 7 encoders, 2 channel faders and one crossfader and big, 10″ touchscreen display. Reason I wanted such large screen (by contrast, Bergamot has 5″ one) was to avoid juggling between various screen – there’s only so much you can fit on 5″ display. For this I’ve selected the Nextion. The goal with this controller anyways to add official support for touchscreens, so this served as a great testing ground. This was also the very first controller I’ve started working on with STM32 MCU, which is by now in all my controllers as well as in official OpenDeck board. I also wanted something exotic for the wooden case – my go-to wood guy showed me some time back stunning african wood called Padauk. I immediately fell in love with it and decided Cardamom would have it. So, all in all, very experimental controller with lots of unknowns. Below are some pictures of it.</p>

<p><img src="/images/blog/109956535_147772146897016_6430408931493065490_o.jpg" alt="" /></p>

<p><img src="/images/blog/109800995_147773196896911_7581733213845568884_o.jpg" alt="" /></p>

<p><img src="/images/blog/108232583_146912143649683_232275445360695707_o.jpg" alt="" /></p>

<p><img src="/images/blog/107933249_146911963649701_2622829847782104751_o.jpg" alt="" /></p>

<p>As is tradition with my controllers, this one also has reference to teas – the controller is named Cardamom after a spice giving many Ayurvedic teas their spicy taste, and also a source of vitamin B6, which is the chemical on the plate.
As far as Nextion support is concerned, OpenDeck now supports CDC mode, or more simply, the board can now act as USB to serial device, if you choose to reboot into it from Web UI. This allows you to upload your design to the screen from Nextion GUI without detaching screen from OpenDeck board and then plugging it into FTDI or some other converter. This feature is available on all STM32 based boards.</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/TPc6ETIsVTM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h2 id="rooibos">Rooibos</h2>

<p>I seriously don’t know what I was thinking when I was designing Cardamom. The thing is huge! Actually it was so large that it wouldn’t fit in my small suitcase, which annoyed me greatly. Otherwise it did everything I wanted it to do. So, I decided to build virtually the same controller, but smaller. This one was named Rooibos. I’ve removed crossfader since I barely even use that, and also there are 5 encoders instead of 7, which is also fine. Touchscreen is also 10″, but this one is made by Viewtech – the same company that produced the screen for Bergamot controller. This was another experiment – I wanted to see how they behave and I also wanted official support for them in OpenDeck firmware. I’m very happy with the screen quality. In my opinion, touch sensitivity is bit better than on Nextion, however, their software tooling leaves a lot to be desired. If you want convenience, go with Nextion. If you want industrial quality and reliability, go with Viewtech (or Stone HMI, their global brand). Anyways, this is my main controller now.</p>

<p><img src="/images/blog/129955349_198098805197683_6067196513235935820_o.jpg" alt="" /></p>

<p><img src="/images/blog/129588734_198100081864222_1509632558569520269_o.jpg" alt="" /></p>

<p><img src="/images/blog/129474055_198111261863104_8315209481913533469_o.jpg" alt="" /></p>

<p>Rooibos is a red bush native to South Africa. Leaves from it are used to make one of my favorite teas with the same name. Perfect for any time of the day since it doesn’t contain theine, so it won’t keep you awake, unlike black and green (and anything made from Camellia Sinensis, really) teas do.</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/B4JwPd6Kib4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h2 id="bergamot">Bergamot</h2>

<p>Having built Rooibos I’ve filled all my controller needs, however, I still had that old Bergamot controller lying around. It irked that it was based on, by now, unsupported hardware (ATmega32u4) and it also had worn-out wooden case, which just wasn’t up to the standard of Padauk (but then again, what is?). So I’ve just rebuilt the whole thing, leaving mostly everything as it. I did change the screen, however. It’s 7″ one from Stone HMI.</p>

<p><img src="/images/blog/138267756_224522002555363_4414520917304436623_o.jpg" alt="" /></p>

<p><img src="/images/blog/138222362_224522509221979_5499731080639708385_o.jpg" alt="" /></p>

<p><img src="/images/blog/138047851_224522602555303_6505723444698743035_o.jpg" alt="" /></p>

<h2 id="xy-support">X/Y support</h2>

<p>There is one more thing I’ve added to OpenDeck firmware in latest release – the ability to define custom regions on screen to serve as analog components. Defining is done in Web Ui, just like everything else. This could enable some really cool use-cases. Sadly, all I could think of and show off was controlling two effects at the same time in Traktor DJ. Here’s to hoping I get to see more use cases of this!</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/K29GrrtvoAA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>]]></content><author><name></name></author><category term="buildlog" /><summary type="html"><![CDATA[About a year ago I’ve started sketching the new controller for myself, since I’ve found myself a bit limited by the Bergamot controller. Eventually, I made three different controllers (or two, depending on how you count).]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/touchscreen_trio.jpg" /><media:content medium="image" url="https://shanteacontrols.com/touchscreen_trio.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Support for new hardware</title><link href="https://shanteacontrols.com/2020/11/19/support-for-new-hardware/" rel="alternate" type="text/html" title="Support for new hardware" /><published>2020-11-19T00:00:00+00:00</published><updated>2020-11-19T00:00:00+00:00</updated><id>https://shanteacontrols.com/2020/11/19/support-for-new-hardware</id><content type="html" xml:base="https://shanteacontrols.com/2020/11/19/support-for-new-hardware/"><![CDATA[<p>Latest OpenDeck firmware now supports two new STM32F4 boards, commonly known as “Black Pill” - the one with STM32F401 and STM32F411 MCUs. These are very powerful boards and their MCU is very similar to the one I’m already using for all my new controllers and also new OpenDeck board.</p>

<p>They are also very cheap (can be found on eBay for ~4$). More information about these boards can he found <a href="https://stm32-base.org/boards/STM32F401CEU6-WeAct-Black-Pill-V3.0">here</a>. These boards are great alternative to small Arduino Micro boards which aren’t supported anymore since OpenDeck cannot fit into its flash memory.</p>

<p>On the Arduino side of things, <a href="http://mayhewlabs.com/products/mux-shield-2">Mux Shield 2</a> is now supported for Arduino Mega. This shield adds 48 analog inputs to Arduino Mega, which should be more than enough for most people (it’s even more than official OpenDeck board!).</p>

<p><img src="/images/blog/mux_shield2.jpg" alt="" /></p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[Latest OpenDeck firmware now supports two new STM32F4 boards, commonly known as “Black Pill” - the one with STM32F401 and STM32F411 MCUs. These are very powerful boards and their MCU is very similar to the one I’m already using for all my new controllers and also new OpenDeck board.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/blackpill411.jpg" /><media:content medium="image" url="https://shanteacontrols.com/blackpill411.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">OpenDeck v2 boards now available</title><link href="https://shanteacontrols.com/2020/11/11/opendeck-v2-boards-now-available/" rel="alternate" type="text/html" title="OpenDeck v2 boards now available" /><published>2020-11-11T00:00:00+00:00</published><updated>2020-11-11T00:00:00+00:00</updated><id>https://shanteacontrols.com/2020/11/11/opendeck-v2-boards-now-available</id><content type="html" xml:base="https://shanteacontrols.com/2020/11/11/opendeck-v2-boards-now-available/"><![CDATA[<p>This might be the shortest post I’ve ever written - but fairly important nonetheless. The OpenDeck v2 boards can now be ordered via <a href="https://www.tindie.com/products/paradajz/opendeck-diy-midi-platform-m/">Tindie</a>! As an reminder, OpenDeck v2 boards bring the the following:</p>

<ul>
  <li>64 digital inputs for 64 buttons or 32 encoders</li>
  <li>32 analog inputs which can be used as button inputs as well</li>
  <li>48 digital outputs for LEDs (with integrated resistors, so no external resistors are required)</li>
  <li>DIN MIDI in and out</li>
  <li>Class-compliant USB MIDI which works on any operating system without any drivers</li>
  <li>Additional UART connector for touchscreens</li>
  <li>Additional I2C connector for small LCD/OLED displays</li>
  <li>Additional SPI connector which is currently unused</li>
  <li>STM32F405 MCU capable of hosting 10 presets</li>
</ul>

<p>This took longer than expected, but I’m happy that I managed to make them available before the end of this year.</p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[This might be the shortest post I’ve ever written - but fairly important nonetheless. The OpenDeck v2 boards can now be ordered via Tindie! As an reminder, OpenDeck v2 boards bring the the following:]]></summary></entry><entry><title type="html">New firmware, new boards, new controllers</title><link href="https://shanteacontrols.com/2020/10/12/new-firmware-new-boards-new-controllers/" rel="alternate" type="text/html" title="New firmware, new boards, new controllers" /><published>2020-10-12T00:00:00+00:00</published><updated>2020-10-12T00:00:00+00:00</updated><id>https://shanteacontrols.com/2020/10/12/new-firmware-new-boards-new-controllers</id><content type="html" xml:base="https://shanteacontrols.com/2020/10/12/new-firmware-new-boards-new-controllers/"><![CDATA[<p>Due to everything that’s going on right now it feels like ancient history the last time I’ve talked about new OpenDeck firmware. Or new boards. Or new controllers. In fact, I think the past few months have been the busiest months for OpenDeck ever since the project started. If you’re interested on what’s going on with the project, keep reading!</p>

<h2 id="opendeck-firmware-v5">OpenDeck firmware v5</h2>

<p>After more than a year of work, I’ve finally released <a href="https://github.com/shanteacontrols/OpenDeck/releases">new firmware, called v5</a>. This has been almost a total rewrite of the build system, total rewrite of board support subsystem and really, complete refactoring of most of the code to make it even more modular and testable. Which doesn’t mean there aren’t new features - far from it.</p>

<h3 id="official-support-for-stm32">Official support for STM32</h3>

<p>The support for STM32 is now finally stable and official. Not just that, I am now using STM32F405 as my primary MCU for all new designs - including for <a href="https://shanteacontrols.com/2019/08/06/building-dubfocus-controllers/">DubFocus controller.</a> I will talk about the next-gen DubFocus controllers in another post.</p>

<h3 id="new-sysex-protocol">New SysEx protocol</h3>

<p>One of the major limitations of previous firmware releases was the SysEx protocol. As with other MIDI messages, SysEx bytes are limited to maximum value of 127. This means that with my old protocol, you couldn’t configure more than 128 components per block. For instance, in OpenDeck firmware, every analog input can be configured as button, which is why the interface presents total number of buttons as sum of physical digital inputs and analog inputs. If the board, for example, had 64 digital inputs and 80 analog inputs, that’s total of 144 buttons to configure. With old protocol, there was no way to configure any component with index larger than 127. This also meant that you couldn’t configure NRPN index or pitch bend ranges without introducing ugly hacks in the interface - both NRPN index and pitch bend range can have upper value of 16383. So, how do you configure this with my protocol? To solve this I’ve introduced ugly hack in the interface so the interface was showing LSB and MSB parameters - lower and upper byte, respectively. You had to do some mental gymnastics in order to configure this in the right way.</p>

<p>I’ve actually designed SysEx protocol with this in mind - there was an option to use it in a way described above, or, it could work in two-byte mode: in this mode, each parameter index and its value were represented by two bytes. This gives the ability to use 14-bit ranges instead of measly 7-bit ones. There was a caveat, though: the web interface was designed only with one-byte protocol in mind, and it was no longer possible to add the support for it since the code has been obfuscated and the original developer moved on to other things. The solution here was to completely redesign the interface. More on this later, but long story short: OpenDeck v5 now uses two-byte protocol by default. The entire protocol is documented in the <a href="https://github.com/shanteacontrols/OpenDeck/wiki/SysEx-Configuration">OpenDeck wiki</a>.</p>

<h3 id="midi-bootloader">MIDI bootloader</h3>

<p>There’s nothing that normal people like better than to open terminal to update the firmware on their devices. I’m kidding, of course. Each time I was asked for help on how to update the firmware on the OpenDeck boards, I shook my head, took a deep breath, stretched my fingers and started typing something along these words: “Well, first you need to open terminal and type the following…”.</p>

<p>I hated it. Here I was, explaining to users, that in order to update their supposedly simple to use board they need to launch terminal to update it. That irked me for very long until I came up with very obvious solution: why wouldn’t I reuse the same USB MIDI stack I already use and make the bootloader show up as just another MIDI device? Users would update it with special SysEx file. I couldn’t find anything similar anywhere else so I had to do this from scratch. I do remember reading somewhere about someone trying out something similar but it supposedly didn’t work for some reason. I decided to try it anyways since, if it would work, that would be a giant step forward for the project and its ease of use. This turned out to be more complex that I hoped, but eventually I’ve managed to make it work.</p>

<p>The biggest part of making this work was to actually convert the compiled binary to normal SysEx messages. I did this with <a href="https://github.com/shanteacontrols/OpenDeck/blob/e3b88457fbd712ee6348f3dab65e7f213690442f/scripts/sysex_fw_create.sh">bash script</a>. The script reads binary file byte by byte and converts that byte into two bytes in SysEx format. If you’re wondering why two bytes, well, byte range is 0-255, and as I’ve explained above, SysEx byte can only have range 0-127. The script also adds some more messages with headers and metadata, but this is basically it. The <a href="https://github.com/shanteacontrols/OpenDeck/tree/master/src/bootloader">bootloader</a> on the board parses this file and updates the firmware.</p>

<p>No more terminal! Bonus: firmware update is now possible within web configurator.</p>

<h3 id="touchscreen-support">Touchscreen support</h3>

<p>Two years ago I’ve build <a href="https://shanteacontrols.com/2018/10/14/bergamot-touchscreen-midi-controller/">Bergamot</a> - a controller based on a touchscreen. The code was a bit specific for that particular controller and for that particular screen, but now, there’s official support for every single <a href="https://nextion.tech/">Nextion</a> touchscreen in OpenDeck firmware! Not only that, <a href="http://www.stone-hmi.com/">Stone HMI</a> screens are supported as well. Currently, the firmware supports touchscreen buttons and touchscreen icons. These icons are, as far as user and firmware are concerned - just normal LEDs. Icon configuration is actually LED configuration, so every option available right now for LEDs is available for touchsreen icons as well - blinking, MIDI in control, local control etc. Same thing goes for buttons - buttons are also configured just like normal physical buttons. There’s detailed guide on how to configure touchscreens in the <a href="https://github.com/shanteacontrols/OpenDeck/wiki/Configuring-touchscreens">wiki</a>.</p>

<p>I’ve also built myself a brand new controller which features 10” Nextion display called Cardamom.</p>

<p><img src="/images/blog/109956535_147772146897016_6430408931493065490_o.jpg" alt="" /></p>

<p><img src="/images/blog/109800995_147773196896911_7581733213845568884_o.jpg" alt="" /></p>

<p><img src="/images/blog/108232583_146912143649683_232275445360695707_o.jpg" alt="" /></p>

<p>The stunning red wood is african Padouk. The controller is also based on STM32F405 MCU, the one I am now using for all new designs. I don’t think I’ve ever spent more time and resources on a controller than on this one - one way or another I’ve been building it for more than a year.</p>

<p>I’ve also recorded a video of me mixing on this controller.</p>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/TPc6ETIsVTM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h3 id="sysex-programmer">SysEx programmer</h3>

<p>I’ve been asked this question a lot - how do I use OpenDeck board as SysEx programmer? The answer was, unfortunately, you can’t. <a href="https://www.youtube.com/watch?v=6FwmGLzyRDk">Well, well, well, how the turntables</a>! There is now ability to do just that. Transform your OpenDeck board into SysEx programmer with single toggle in the web interface.</p>

<h3 id="new-ui">New UI</h3>

<p>UI has been totally rewritten and redesigned by <a href="https://github.com/wyrd-code">Tomislav Glavas</a>. If you’re looking for WebMIDI expert, well, here’s brand new one. I’ll let the screenshots below do the talking.</p>

<p><img src="/images/blog/new_webui_01.png" alt="" /></p>

<p><img src="/images/blog/new_webui_02.png" alt="" /></p>

<p><img src="/images/blog/new_webui_03.png" alt="" /></p>

<p><img src="/images/blog/new_webui_04.png" alt="" /></p>

<p><img src="/images/blog/new_webui_05.png" alt="" /></p>

<p><img src="/images/blog/new_webui_06.png" alt="" /></p>

<p><img src="/images/blog/new_webui_07.png" alt="" /></p>

<p><img src="/images/blog/new_webui_08.png" alt="" /></p>

<p><img src="/images/blog/new_webui_09.png" alt="" /></p>

<p><img src="/images/blog/new_webui_10.png" alt="" /></p>

<p><img src="/images/blog/new_webui_11.png" alt="" /></p>

<p><img src="/images/blog/new_webui_12.png" alt="" /></p>

<p><img src="/images/blog/new_webui_13.png" alt="" /></p>

<p>New UI supports both the old and new SysEx protocol, it supports column view so that it’s easy to see all options for specific block at once, it supports firmware updates, backup and restore, activity log is showing much more detailed info than the old one, there’s more helpful information for available options now, the UI doesn’t crash if some parameters aren’t supported etc. I think it’s really phenomenal - Tomislav did <a href="https://www.youtube.com/watch?v=hQRv0qM_5rQ">great job</a> here, and more than that, did some things I didn’t even ask for which improved the entire application. We both have same mindset regarding the things we build so the entire collaboration went really smoothly. Oh, the entire thing is also <a href="https://github.com/shanteacontrols/OpenDeckUI">open-source</a>.</p>

<p>Another great thing about the UI is that it separates buttons into physical, analog inputs and touchscreen buttons. UI does the same thing for LEDs - section is separated into physical LEDs and touchscreen icons / LEDs.</p>

<h3 id="other-things">Other things</h3>

<p>There is also a new ability which allows users to configure the button to send different velocity on each successive press in any desired step. Also, the firmware now supports full backup and restore - something which never worked right in previous firmware.</p>

<p>Sadly, there are some bad news as well - due to large amount of new features, OpenDeck no longer supports ATmega328P and ATmega32u4 - so boards like Arduino Uno, Arduino Leonardo, Arduino Pro Micro etc. aren’t supported anymore as a result of this. This is not an arbitrary decision - the firmware simply doesn’t fit anymore into the flash memory of this boards. However, last <a href="https://github.com/shanteacontrols/OpenDeck/releases/tag/v4.1.3">v4</a> firmware release can still be loaded on these boards and will work just fine.</p>

<p>New build system which allows defining of custom board variants is also part of this release. I’ve written about this in the <a href="https://shanteacontrols.com/2020/06/11/creating-custom-opendeck-board-variants/">previous post</a>.</p>

<h3 id="new-boards">New boards</h3>

<p><img src="/images/blog/IMG_3141_web.jpg" alt="" /></p>

<p><img src="/images/blog/IMG_3135_web.jpg" alt="" /></p>

<p>Lastly, I want to talk about new boards. Some really good news here - new boards are in production as I type this post! The OpenDeck v2 board features STM32F405 MCU, has support for 10 presets, has support for touchscreens, OLED displays and also the ability to work with I2C and SPI sensors in the future (there are connectors present on board) and other than that, it has same amount of I/O as the v1 board. Dimensions are the same, as well as the pinouts - with one change regarding the analog inputs - there are now both ground and power supply pins for each of 32 analog inputs.</p>

<p>New boards will be available on <a href="https://www.tindie.com/products/paradajz/opendeck-diy-midi-platform-m/">Tindie</a> in few weeks at the same price as old board.</p>]]></content><author><name></name></author><category term="opendeck" /><category term="announce" /><summary type="html"><![CDATA[Due to everything that’s going on right now it feels like ancient history the last time I’ve talked about new OpenDeck firmware. Or new boards. Or new controllers. In fact, I think the past few months have been the busiest months for OpenDeck ever since the project started. If you’re interested on what’s going on with the project, keep reading!]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://shanteacontrols.com/IMG_3135_web.jpg" /><media:content medium="image" url="https://shanteacontrols.com/IMG_3135_web.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>