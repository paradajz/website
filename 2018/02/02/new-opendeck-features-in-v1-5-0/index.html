<!DOCTYPE html> <html lang="zxx"> <head> <!-- meta --> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="description" content=""> <meta name="keywords" content=""> <!-- Facebook Open Graph --> <meta content="Shantea Controls" property="og:site_name"> <meta property="og:locale" content="en_US"> <meta content="New OpenDeck features in v1.5.0" property="og:title"> <meta content="article" property="og:type"> <meta content="" property="og:description"> <meta content="https://shanteacontrols.com/2018/02/02/new-opendeck-features-in-v1-5-0/" property="og:url"> <meta content="ed7e6-webui_nrpn_7bit.png" property="og:image"> <meta content="opendeck" property="article:tag"> <meta content="announce" property="article:tag"> <meta content="2018-02-02T00:00:00+00:00" property="article:published_time"> <!-- Twitter cards --> <meta name="twitter:site" content="@"> <meta name="twitter:creator" content="@"> <meta name="twitter:title" content="New OpenDeck features in v1.5.0"> <meta name="twitter:description" content=""> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://shanteacontrols.comed7e6-webui_nrpn_7bit.png"> <!-- Site Title --> <title> New OpenDeck features in v1.5.0 &#8226 Shantea Controls Blog </title> <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"> <!-- gulp:css --> <link rel="stylesheet" href="/css/blog/app.css"> <!-- endgulp --> <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600" rel="stylesheet"> </head> <nav class="navbar navbar-default fixed-top"> <div class="container-fluid"> <div class="navbar-header"> <a href="/blog/blog.html"> <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/> <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/> </svg> </a> <a href="/pages/tags/"> <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-hash" viewBox="0 0 16 16"> <path d="M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z"/> </svg> </a>  </div> </div> </nav> <body class="post-template"> <div class="page-header grey-bg mt-5 pb-100 mb-100 pt-85 clearfix"> <div class="container"> <div class="row"> <div class="col"> <div class="author-text"> <div class="single-author-d w-100"> <div class="title"> <h2 class="mb-0 text-center">New OpenDeck features in v1.5.0</h2> </div> <div class="post-meta d-flex"> <ul class="post-sp-meta list-inline mx-auto my-0"> <li class="list-inline-item"> <i class="fa fa-clock-o"></i>02 February 2018 </li> </ul> </div> </div> </div> </div> </div> </div> </div> <div class="post-content-area pb-100 clearfix"> <div class="container"> <div class="row"> <div class="col-lg-10 mx-auto"> <div class="s-post-details"> <div class="post-image mb-4"> <img class="mx-auto d-block" src="/images/blog/ed7e6-webui_nrpn_7bit.png" alt="New OpenDeck features in v1.5.0"> </div> <div class="entry-content"><p>Last time I talked about features in OpenDeck was, well, long time ago. I have released OpenDeck <a href="https://github.com/shanteacontrols/OpenDeck/releases/tag/v1.5.0">firmware v1.5.0</a> so it’s time to fix this!</p> <h2 id="nrpn">NRPN</h2> <p>Many people have been asking me about NRPN support on OpenDeck. I’ve never used it, so I haven’t implemented it before, but now OpenDeck official supports it. For those who don’t know, NRPN stands for <em>Non-registered Part Number</em>. Behind this cryptic acronym lies solution to a problem which is very specific to how MIDI operates. Since MIDI is actually 7-bit protocol, that is, each MIDI message is composed of bytes containing values 0-127, there isn’t much room left for user-defined CC messages, many of them being <a href="http://nickfever.com/music/midi-cc-list">already mapped to specific task</a> by MIDI specification. So, even though CC message IDs can range 0-127, in reality you can have much less if your software or controller is hardcoded to respond to specific CCs. NPRN solves this problem by doubling CC resolution to 14-bit. Now, instead of only 127 CC IDs, you can map your CC up to 16383. That’s ridiculously large. Drawback to this is that instead of sending single MIDI message for CC, three messages are needed to send NRPN message, so MIDI traffic is much larger. This can become obstacle on older MIDI gear, but in practice you really shouldn’t have any problems with it. As an example, I’ll illustrate the difference between sending MIDI CC and NRPN message.</p> <p>Standard CC message:</p> <ul> <li>CC ID, CC value, channel</li> </ul> <p>NPRN message:</p> <ul> <li>CC 99, upper 7-bits of wanted ID (MSB), channel</li> <li>CC 98, lower 7-bits of wanted ID (LSB), channel</li> <li>CC 6, value, channel</li> </ul> <p>There’s a bit of bit-shifting involved to convert 14-bit number to two 7-bit values.</p> <p>But wait! There’s more! Not only does NRPN double the resolution of CC IDs, it can also double the resolution of control value itself. This way, you can send very precise values from potentiometers, pressure sensors etc.. This NPRN message is very similar to 3-byte one, with one minor difference:</p> <ul> <li>CC 99, upper 7-bits of wanted ID (MSB), channel</li> <li>CC 98, lower 7-bits of wanted ID (LSB), channel</li> <li>CC 6, upper 7-bits of value (MSB), channel</li> <li>CC 38, lower 7-bits of value (LSB), channel</li> </ul> <p>To configure NRPN, simply select NPRN 7-bit or NPRN 14-bit in Web interface:</p> <p><img src="/images/blog/ed7e6-webui_nrpn_7bit.png" alt=""></p> <p><img src="/images/blog/59fda-webui_nrpn_14bit.png" alt=""></p> <p>Notice how interface displays additional info depending on selected option.</p> <h2 id="buttons">Buttons</h2> <p>Buttons can now be mapped to additional MIDI messages:</p> <p><img src="/images/blog/f3fe7-webui_buttons_msg_types.png" alt=""></p> <p>These messages can be really handy when controlling MIDI gear. Also, notice the “CC” and “CC/0 off” messages. First one is used when you only want to send CC messages from buttons once button has been pressed. On release, nothing happens. Second one (0 off) is similar, but the difference is that buttons will send same CC ID on release with value 0. This option also depends on button type (momentary or latching), so there’s actually lot of possibilities.</p> <p>On the bottom you can also notice something new - “On velocity”. With this option you can select velocity which button sends on press. This used to be hardcoded to value 127. Note that if buttons are configured to send CC messages, “On velocity” becomes CC value.</p> <h2 id="leds">LEDs</h2> <p>I have added a new parameter to LED configuration - activation velocity.</p> <p><img src="/images/blog/05206-webui_leds_act_vel.png" alt=""></p> <p>This option is used only for single-color LEDs and you can define which velocity will turn the LED on. For RGB LEDs, <a href="https://github.com/shanteacontrols/OpenDeck/wiki/LED-control">velocity-table</a> is used as before.</p> <h2 id="version-info">Version info</h2> <p>Since I added <a href="https://shanteacontrols.com/2017/12/14/opendeck-on-arduino/">support for Arduino boards</a>, the info window now displays board name (variant) which is being used.</p> <p><img src="/images/blog/8c2b8-webui_version_info.png" alt=""></p> <p><img src="/images/blog/5e7ff-webui_version_info_2.png" alt=""></p> <h2 id="software-updating">Software updating</h2> <p>For now, updating the software is done using special mass-storage mode. Since it’s sometimes unstable, doesn’t work in Finder on Mac OS X and it’s quite large, I’ve replaced it with new, HID-based bootloader. This could or could not mean something to you, but the point here is that Chrome can access USB HID devices directly, just like USB MIDI devices, so soon, it will be possible to update the firmware directly from web interface. Stay tuned!</p> </div> <div class="inner-padding fullwidth pb-60"> <div class="post-share-icon clearfix"> <div class="tag-list"> <div class="row"> <div class="col-md-8"> <p class="float-left pr-2"><strong>Tags :</strong></p> <ul class="float-left"> <li> <a href="/tag/opendeck/blog.html"> #opendeck</a> </li> <li> <a href="/tag/announce/blog.html"> #announce</a> </li> </ul> </div> <div class="col-md-4"></div> </div> </div> </div> </div> </div> <div class="categories-carousel pb-60 clearfix"> <div class="section-title"> <h3>Related Posts</h3> </div> <div class="related-post-carousel owl-carousel"> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/od3/5.png" alt="OpenDeck boards v3 now available"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2022/06/20/opendeck-boards-v3-available-now/">OpenDeck boards v3 now available</a> </h3> <div class="btn-read"> <a href="/2022/06/20/opendeck-boards-v3-available-now/">Read More</a> </div> </div> </div> </div> </div> </div> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/od3/2.png" alt="OpenDeck boards v3 in development"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2022/04/09/opendeck-boards-v3-in-development/">OpenDeck boards v3 in development</a> </h3> <div class="btn-read"> <a href="/2022/04/09/opendeck-boards-v3-in-development/">Read More</a> </div> </div> </div> </div> </div> </div> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/ble.png" alt="OpenDeck v7"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2022/04/09/opendeck-7/">OpenDeck v7</a> </h3> <div class="btn-read"> <a href="/2022/04/09/opendeck-7/">Read More</a> </div> </div> </div> </div> </div> </div> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/cover_opendeck_v6.jpg" alt="OpenDeck v6 - what comes next?"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2021/11/23/opendeck-6-what-comes-next/">OpenDeck v6 - what comes next?</a> </h3> <div class="btn-read"> <a href="/2021/11/23/opendeck-6-what-comes-next/">Read More</a> </div> </div> </div> </div> </div> </div> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/166086360_207954164335998_7262799458133236482_n.jpg" alt="Regarding DubFocus"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2021/03/30/regarding-dubfocus/">Regarding DubFocus</a> </h3> <div class="btn-read"> <a href="/2021/03/30/regarding-dubfocus/">Read More</a> </div> </div> </div> </div> </div> </div> <div class="single-item"> <div class="categories-post-image"> <img src="/images/blog/blackpill411.jpg" alt="Support for new hardware"> <div class="categories-post-hover text-center"> <div class="hover-details"> <div class="post-link"> <h3> <a href="/2020/11/19/support-for-new-hardware/">Support for new hardware</a> </h3> <div class="btn-read"> <a href="/2020/11/19/support-for-new-hardware/">Read More</a> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <footer> <div class="footer-area clearfix"> <div class="container"> <div class="row"> <div class="col-lg-12"> <div class="footer-logo pb-100 pt-100 text-center"> <a href="https://shanteacontrols.com"> <img src="/images/logo_notext_inv.svg" alt="Shantea Controls"> </a> </div> </div> </div> <div class="row pb-60"> <div class="col-lg-3 col-md-6"> <div class="footer-widget"> <div class="widget-title"> <h4> About </h4> </div> <div class="widget-text"> <p>Shantea Controls Blog</p> <div class="social-link"> <ul> </ul> </div> </div> </div> </div> <div class="col-lg-3 col-md-6"> <div class="footer-widget"> <div class="widget-title"> <h4>Recent posts</h4> </div> <div class="widget-text"> <div class="r-post"> <ul> <li><a href="/2022/06/20/opendeck-boards-v3-available-now/">OpenDeck boards v3 now available </a> </li> <li><a href="/2022/04/09/opendeck-boards-v3-in-development/">OpenDeck boards v3 in development </a> </li> <li><a href="/2022/04/09/opendeck-7/">OpenDeck v7 </a> </li> <li><a href="/2021/11/23/opendeck-6-what-comes-next/">OpenDeck v6 - what comes next? </a> </li> </ul> </div> </div> </div> </div> <div class="col-lg-3 col-md-6"> <div class="footer-widget"> <div class="widget-title"> <h4> Links</h4> </div> <div class="widget-text"> <div class="widget-link"> <ul> <ul> <li><a href="/" target="_blank">Main page</a></li> <li><a href="https://youtube.com/shanteacontrols" target="_blank">YouTube</a></li> <li><a href="https://www.facebook.com/shanteacontrolsmidi" target="_blank">Facebook</a></li> <li><a href="https://github.com/shanteacontrols/OpenDeck" target="_blank">GitHub</a></li> </ul> </ul></div> </div> </div> </div> </div> <div class="row"> <div class="col"> <div class="footer-text text-center"> <p class="footer-address"> &copy; 2022 Shantea Controls | Developed by <a href="https://themeix.com">themeix</a></p> </div> </div> </div> </div> </div> </footer> <script src="/js/blog/build.js"></script> </body> </html> 